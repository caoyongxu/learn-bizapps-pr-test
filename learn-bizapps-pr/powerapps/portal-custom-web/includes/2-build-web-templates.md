**Web template** is a very simple entity with only the following attributes available.

* **Name**. When template is included in other content, or extended by other templates, it is referred to by this name.
* **Source**. The source content of the template. It can be a static text, HTML fragment, or, most often, a layout using Liquid.
* **MIME Type**. Defines what MIME type the server will send to the client when the template is rendered. If value is not provided, the value will be `text/html` is assumed, which is a standard type for HTML pages. It's possible to create a web template that will render specialized content. For example, you can create a web template that will return some Common Data Service data in `json` format. In this case MIME type would be set to `application/json`. 

## Web template management

Liquid implementation within Power Apps portals contain a number of [Template tags](https://docs.microsoft.com/powerapps/maker/portals/liquid/template-tags/?azure-portal=true) that help managing templates and promote reusability.

### fetchxml

Allows user to query data from Common Data Service and renders the results in a page.

```xml
{% fetchxml varResults %}
<!— Fetchxml query -->
<fetch>
  <entity name="account">
    <attribute name="name" />
  </entity>
</fetch>
{% endfetchxml %}
```

`varResults` variable will contain the results of the query.

```xml
{% for account in varResults.results.entities %} 
  {{ account.name }}<br />
{% endfor %}
```

> [!IMPORTANT]
> Entity permissions are always applied to the `fetchxml` tag.

### comment

Any content within the block will not be rendered, and any Liquid code within will not be executed. This is useful for including extended comments in complex templates as well as temporarily comment out blocks of code when troubleshooting.

```xml
This is a {% comment %}very useful {% endcomment %}comment.
```

Will generate 

> This is a comment.

### raw

Allows output of Liquid code on a page without having it parsed and executed. This is useful for generating content which uses conflicting client-side syntax, e.g. Handlebars.

```xml
Hello, {% raw %}{{ user.fullname }}.{% endraw %} Nice to meet you.
```

Will generate 

> Hello, {{ user.fullname }}. Nice to meet you.

Note how `user.fullname` is rendered explicitly instead of being processed as a Liquid instruction and converted into the actual name of the user.

### include

Includes the contents of one template in another, by name. This allows for the reuse of common template fragments in multiple places, for example, rendering of the social links. The included template will have access to any variables defined in the parent template and it's possible to pass parameters.

```xml
{% include 'Breadcrumbs', separator: '>' %}
```

This will include the output generated by the template **Breadcrumbs** that will have a variable `separator` set to `>` symbol.

### block

Defining a block within a template defines a region that can be optionally overwritten by the templates that extend the current template.

### extend

When used in conjunction with the block tag, provides template inheritance. This allows multiple templates to use a shared layout, while overriding specific areas of the parent layout. When `extends` is used, it must be the first content in the template, and can only be followed by one or more block tags.

#### **Base template**

```xml
<div>
Hello
{% block content %}default content{% endblock %}
</div>
```

**Child Template**

```xml
{% extends 'Base Template' %}
{% block content %}Power Apps portals{% endblock%}
```

The Child Template will generate the following output

```html
<div>
  Hello
  Power Apps portals
</div>
```

The typical use of the `extend` and `block` tags is to separate layout and content templates. Parent or base templates usually define broad page layout, for example, if it's a single column, or a two columns page. Child templates that extend the base, can only define the content of the blocks as specified by the parent.

For a comprehensive Liquid code sample that demonstrates template inheritance with `block/extend` and `include` tags, see [Create a custom page template](https://docs.microsoft.com/powerapps/maker/portals/liquid/create-custom-template).

## Web templates best practices

There are certain steps you can take to improve template structure and make the web templates more manageable. 

* Choose descriptive names for your templates. They will be referenced or as part of other templates.

* Breakdown the page layout and separate layout from content. These will be candidates for extendable templates.

* Look out for repeatable and reusable fragments - these can be defined as sub-templates and utilize `include` tag.

* `include` tag can help reuse not only layout but commonly used JavaScript fragments as well. Make your JavaScript templates "smart" by using parameters available in `include` tag. These fragments will be inserted inline.

* Move larger reusable blocks of JavaScript to separate files and insert them as a reference instead. Client's browser will load them separately and they can be cached. In addition, externally loaded scripts can be minified. This will result in a better performance. 

* Find the parts of the page that need to be translated for multi-lingual implementation. These will have to be defined as either page content or content snippets.

* Identify editable fragments - which parts of the web page would you like users responsible for content management, to maintain.

* When writing template be generous with the layout but avoid excessive blank lines by using hyphens in your tags, e.g. 

  ```xml
  {%- if username -%}
    Hello, {{ user.firstname}}
  {%- endif -%}
  ```

* Use `comments` tag to describe complex parts of the template

* Study templates that are already deployed with the starter portal and look for Liquid techniques in [Create advanced templates for portals](https://docs.microsoft.com/powerapps/maker/portals/liquid/create-custom-template/?azure-portal-true).

There is a number of ready-to-use Liquid templates installed when you provision a starter portal: [Built-in web templates](https://docs.microsoft.com/powerapps/maker/portals/liquid/store-content-web-templates#built-in-web-templates/?azure-portal-true). Their names are fixed and the templates are not available for editing.

For the comprehensive Liquid reference and template samples see [Work with Liquid templates](https://docs.microsoft.com/powerapps/maker/portals/liquid/liquid-overview/?azure-portal-true).


