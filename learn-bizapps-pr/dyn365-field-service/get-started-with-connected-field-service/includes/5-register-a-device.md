## Exercise - Registering a Device

In this exercise, you will configure the simulator and register a device.

### Configure the Simulator


1. Go to your Azure portal, select Resource Groups, and open the resource group you created when you deployed Connected Field Service.

![Resource Groups](../media/1-gs-unit5.png)

2. Locate and click on the Simulator App Service.

![Simulator app service](../media/2-gs-unit5.png)

3. Click on the URL.

![URL](../media/3-gs-unit5.png)

4. Select the Connect.

![Connect selection](../media/4-gs-unit5.png)

5. Go back to Azure, select the Resource Group you created and click on the IoT Hub.

![Click newly created resource group](../media/5-gs-unit5.png)

6. Copy the Host Name.

![Copy host name icon](../media/6-gs-unit5.png)

7. Go back to the simulator and paste the Host Name into the Host Field.

![Configure connection](../media/7-gs-unit5.png)

8. Go back to Azure and select Shared Access Policies.

![Shared Policies](../media/8-gs-unit5.png)

9. Click on the IoT Hub Owner.

![IoT hub owner](../media/9-gs-unit5.png)

10. Copy the Primary Key.

![Copy primary key](../media/10-gs-unit5.png)

11. Go back to the simulator, paste the Primary in the Key field and click Connect.

![Primary key entry](../media/11-gs-unit5.png)

12. Click on the Devices dropdown. You will notice that we currently donâ€™t have any devices, you will register a device in the next exercise.  **Do not close this browser window. **

![No devices showing](../media/12-gs-unit5.png)

### Register a Device

In this exercise, you will be creating a customer asset, and then registering a device with Azure IoT Hub.  You will then manipulate the device to cause the creation of an IoT Alert into Dynamics 365.  By completing this you will have verified your deployment of Connected Field Service is working.

1. Start the Connected Field Service App.

![Open app](../media/13-gs-unit5.png)

2. Click Site Map and select Customer Assets.

![Open site map](../media/14-gs-unit5.png)

3. Click New.

![Click New](../media/15-gs-unit5.png)

4. Enter My Thermostat Simulator for Name, select A. Datum for Account, scroll down and enter MyThermSim1 for Device ID, and click Save.

![Save](../media/16-gs-unit5.png)

5. Click Register Devices.

![Register Devices](../media/17-gs-unit5.png)

6. Click OK.

7. In the Connected Device section, click on the ellipse ... button and click Refresh.

![Refresh](../media/19-gs-unit5.png)

8. You should see the device registration progress.

![Registered device](../media/20-gs-unit5.png)

9. Refresh until the device is registered.

![Device shows registered](../media/21-gs-unit5.png)

10. Go back to the simulator and click Refresh.

![Click refresh](../media/22-gs-unit5.png)

11. Click on the dropdown and select the device you registered.

![Registered device](../media/23-gs-unit5.png)

12. Change the temperature to 86.

![Change temp](../media/24-gs-unit5.png)

13. The Message Sent will contain the temperature and humidity.

![Change temp messages](../media/25-gs-unit5.png)

14. Go back to your Connected Field Service application and open the customer asset you created.

15. Click Related and select IoT Alerts.

![IoT alerts](../media/26-gs-unit5.png)

16. You should see the alerts generated by the simulator.

![Simulator alerts](../media/27-gs-unit5.png)
