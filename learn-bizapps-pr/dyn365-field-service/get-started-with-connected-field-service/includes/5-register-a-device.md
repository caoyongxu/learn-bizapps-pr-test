## Exercise â€“ Registering a device

In this exercise, you'll set up the simulator and register a device.

### Set up the simulator

1. Open your Microsoft Azure portal, select **Resource groups**, and open the resource group that you created when you deployed Connected Field Service.

    ![Select the resource group](../media/1-gs-unit5.png)

2. Find and select the simulator app service.

    ![Select the simulator app service](../media/2-gs-unit5.png)

3. Select the URL.

    ![Select the URL](../media/3a-gs-unit5.png)

4. Select **Connection**.

    ![Connection tab](../media/3-gs-unit5.png)

5. Go back to Azure, select the resource group that you created, and then select the Internet of Things (IoT) hub.

    ![Select the IoT hub](../media/4-gs-unit5.png)

6. Copy the host name.

    ![Copy the host name](../media/5-gs-unit5.png)

7. Go back to the simulator, and paste the host name into the **Host** field.

    ![Set up the connection](../media/6-gs-unit5.png)

8. Go back to Azure, and select **Shared access policies**.

    ![Shared access policies](../media/7-gs-unit5.png)

9. Select the IoT hub owner.

    ![Select the IoT hub owner](../media/8-gs-unit5.png)

10. Copy the primary key.

    ![Copy the primary key](../media/9-gs-unit5.png)

11. Go back to the simulator, paste the primary key in the **Key** field, and then select **Connect**.

    ![Connect button](../media/10-gs-unit5.png)

12. In the **Device ID** field, notice that no devices are currently listed. You'll register a device in the next exercise. **Don't close this browser window.**

    ![No devices listed](../media/11-gs-unit5.png)

### Register a device

You'll now create a customer asset and then register a device with Azure IoT Hub. You'll then manipulate the device so that an IoT Alert is created in Dynamics 365. By completing this procedure, you confirm that your deployment of Connected Field Service is working.

1. Start the Connected Field Service app.

    ![Start the app](../media/12-gs-unit5.png)

2. Open the site map, and select **Customer Assets**.

    ![Customer Assets](../media/13-gs-unit5.png)

3. Select **New**.

    ![New button](../media/14-gs-unit5.png)

4. Enter *My Thermostat Simulator* as the name, select **A. Datum** as the account, scroll down and enter *MyThermSim1* as the device ID, and then select **Save**.

    ![Set up the customer asset](../media/15-gs-unit5.png)

5. Select **Register devices**.

    ![Register devices button](../media/16-gs-unit5.png)

6. Select **OK**.
7. In the **Connected Devices** section, select the ellipse (**...**) button, and then select **Refresh**.

    ![Refresh](../media/18-gs-unit5.png)


8. Repeat the previous step until the device is registered.

    ![Device registered](../media/20-gs-unit5.png)

9. Go back to the simulator, and select **Refresh**.

    ![Refresh button](../media/21-gs-unit5.png)

10. In the **Device ID** field, select the device that you registered.

    ![Select the registered device](../media/22-gs-unit5.png)

11. Change the temperature to *86*.

    ![Change the temperature](../media/23-gs-unit5.png)

12. The **Messages Sent** section shows the temperature and humidity.

    ![Temperature change messages](../media/24-gs-unit5.png)

13. Go back to your Connected Field Service app, and open the customer asset that you created.
14. Select **Related**, and then select **IoT Alerts**.

    ![IoT Alerts](../media/25-gs-unit5.png)

    You should see the alerts that were generated by the simulator.

    ![Simulator alerts](../media/26-gs-unit5.png)
