## Exercise - Create Azure IoT Central Application

In this exercise, you will be building an IoT solution using IoT Central to integrate with the Smart Trash Containers built by Contoso.  As part of this you will be setting up the telemetry including tracking events generated by the customer requesting pickup on demand of the container.

### Start Azure IoT Central Trial


1: Navigate to the Azure Portal [https://portal.azure.com](https://portal.azure.com) and click **Create a Resource**.

![Create a Resource on Azure Portal](../media/1-ic-unit2.png)

2: Search for IoT Central and select "IoT Central Application".

![Select IoT Central Application on Azure Portal](../media/2-ic-unit2.png)

3: Click **Create**.

![Click Create on Azure Portal](../media/3-ic-unit2.png)

4: Type “Smart Trash Can” in the **Application Name** field, and provide a unique URL (use smarttrashcan<date><initials>), select "Free 30-Day Trial" in the **Pricing tier** field, select your subscription, and then click **Create New Resource**.

![Step 4 on Azure Portal](../media/4-ic-unit2.png)

5: Type “smarttrashcontainerlab” if available and click **OK**.

![Step5 on Azure Portal](../media/5-ic-unit2.png)

6: Select a location that is close to your Dynamics 365 location and then click **Create**.

7: After deployment completes - go to the resource and click **IoT Central Application URL**.

![Step 7 on Azure Portal](../media/6-ic-unit2.png)

### Create Device Template

1: Select the **Create Device Templates** tile.

![Create device templates tile on Azure Portal](../media/7-ic-unit2.png)

2: Type “Smart Trash Container “ for the name, and then click **Create**.

![Device template name on Azure Portal](../media/8-ic-unit2.png)

### Create Telemetry Measurement

1: Click **New Measurement**.

![New measurement](../media/9-ic-unit2.png)

2: Select Telemetry.

![Telemetry](../media/10-ic-unit2.png)

3: Type “Percent Full” in the **Display Name** field, “percentfull” in the **Field Name** field, “percent” in the **Units** field, “0” in the **Minimum** field, “100” in the **Maximum** field, “0” in the **Decimal** field, select any color you like, and then click **Save**.

![Step 3](../media/11-ic-unit2.png)

### Create State Measurement

1: Click **New Measurement**.

![New measurement](../media/12-ic-unit2.png)

2: Select "State".

![State](../media/13-ic-unit2.png)

3: Type “Lid Sate ” in the **Display Name** field, “lidstate” in the Field Name field, and then click **Add Value**.

![Lid sate](../media/14-ic-unit2.png)

4: Select "Open" for **Value**, "Open" for **Display Name**, select Red for **Color**, and click **Add Value**.


![Open Values](../media/15-ic-unit2.png)

5: Select "Closed" for **Value**, "Closed" for **Display Name**, and select green for **Color**.

![Closed values](../media/16-ic-unit2.png)

6: Click **Save**.

![Save](../media/17-ic-unit2.png)
 
### Create New Event

1: Click **New Measurement**.

![New measurement](../media/18-ic-unit2.png)

2: Select "Event".

![Select event](../media/19-ic-unit2.png)

3: Type “Ready for Pickup” in the **Display Name** field, “readyforpickup” in the **Field Name** field, “Information” in the **Default Severity** field, and then click **Save**.

![ready for pickup](../media/20-ic-unit2.png)

### Add Setting for Odor Control

1: Click the **Settings** tab and turn on Design Mode.

![Settings](../media/21-ic-unit2.png)

2: Click **Number**.

![Number](../media/22-ic-unit2.png)

3: Type “Odor Control Level” in the **Display Name** field, “ocl” in the **Field Name** field, “0” in the **Number of Decimal Places** field, “0” in the **Minimum** field, “3” in the **Maximum** field, and then click **Save**.

![Odor control level](../media/23-ic-unit2.png)

### Add Property for Trash Container Location ##

1: Click the **Properties** tab and turn on Design Mode.

![Properties](../media/24-ic-unit2.png)

2: Click **Location**.

![Location](../media/25-ic-unit2.png)

3: Type “Container Location” in the **Display Name** field, “location” in the **Field Name** field, “Microsoft, 1 Microsoft Way, Redmond, WA 98052” in the **Initial Value** field, make the address required, and then click **Save**.

![Location address](../media/26-ic-unit2.png)

## Build Sample Dashboard

In this exercise, now that your device template is built, you are going to customize the dashboard for devices to be more useful.

### Add Basic Elements to the Dashboard

1: Click the **Dashboard** tab and turn on Design Mode.

![Dashboard](../media/27-ic-unit2.png)

2: Click **Event List**.

![Event list](../media/28-ic-unit2.png)

3: Type “Pickup Requests” in the **Title** field and then select Ready for Pickup.

![Pickuprequest](../media/29-ic-unit2.png)

4: Click **Save**.

![Save](../media/30-ic-unit2.png)

5: Click **Map**.

![Map](../media/31-ic-unit2.png)

6: Type “Container Location” in the **Title** field, select Container Location in the **Geography Properties** field, and then click **Save**.

![Container location](../media/32-ic-unit2.png)

7: Click **Settings and Properties**.

![Settings and Properties](../media/33-ic-unit2.png)
 
8: Type “Order Level” in the **Title** field and then click **Add/Remove**.

![Title](../media/34-ic-unit2.png)

9: Select "Odor Control Level" and then click **Add**.

![Title](../media/35-ic-unit2.png)

10: Click** OK**.

11: Click **Save**.

![Save](../media/36-ic-unit2.png)

12: You can add other controls if you like. Now turn off Design Mode.

![Turn off design mode](../media/37-ic-unit2.png)

13: Your dashboard will now look like the image below.

![final dashboard](../media/38-ic-unit2.png)

